# ========================================
# ENDGÜLTIGE LÖSUNG - MariaDB Configuration (Minimal & Essential)
# configs/sql/custom.cnf
# ========================================
[mysqld]

# ========================================
# Basic Settings
# ========================================
bind-address = 0.0.0.0
max_allowed_packet = 96MB

# ========================================
# Character Set (Shopware erforderlich)
# ========================================
character_set_server = utf8mb4
collation_server = utf8mb4_unicode_ci

# ========================================
# Performance (Shopware optimiert)
# ========================================
# InnoDB Buffer Pool (wichtigster Parameter)
innodb_buffer_pool_size = 1G
# InnoDB Log Settings (aus ursprünglicher Config)
innodb_flush_log_at_trx_commit = 2
innodb_log_file_size = 256M
# IO-Kapazität (aus ursprünglicher Config)
innodb_io_capacity = 200
# Connections (aus ursprünglicher Config)
max_connections = 600
# Query Cache (für häufige Shopware-Abfragen)
query_cache_type = 1
query_cache_size = 64M

# ========================================
# Optimizer
# ========================================
optimizer_search_depth = 0
optimizer_prune_level = 1
optimizer_switch = 'index_merge_intersection=off'

# ========================================
# Docker Optimierungen
# ========================================
skip_name_resolve
innodb_file_per_table = 1

# ========================================
# Security
# ========================================
sql_mode = STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION